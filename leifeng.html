<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é›·å³°å¤•ç…§Â·å›½é£ç§‘æ™®å°æ¸¸æˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // åŸºäºå¤•ç…§å®æ™¯æå–çš„å›½é£é…è‰²
                        ink: '#1a1a18',          // å¢¨é»‘
                        paper: '#f8f4e8',        // å®£çº¸ç™½
                        sunset: '#e88a4a',       // å¤•ç…§æ©™
                        sunset-deep: '#c86a32',  // è½æ—¥çº¢
                        tower: '#8c6a48',        // å¤å¡”æ£•
                        mist: '#e6d8c8',         // è–„é›¾ç°
                    },
                    fontFamily: {
                        kai: ['"KaiTi"', '"STKaiti"', 'serif'],
                        song: ['"SimSun"', '"STSong"', 'serif'],
                        maobi: ['"Ma Shan Zheng"', 'cursive'], // æ¯›ç¬”å­—ä½“
                    },
                    keyframes: {
                        // å…¨æ–°å…‰å½±åŠ¨ç”»
                        sunset-ripple: {
                            '0%': { transform: 'translate(-50%, -50%) scale(1)', opacity: 0.6 },
                            '50%': { transform: 'translate(-50%, -50%) scale(1.2)', opacity: 0.8 },
                            '100%': { transform: 'translate(-50%, -50%) scale(1)', opacity: 0.6 },
                        },
                        cloud-float: {
                            '0%': { transform: 'translateX(0)' },
                            '50%': { transform: 'translateX(-20px)' },
                            '100%': { transform: 'translateX(0)' },
                        },
                        tower-shadow: {
                            '0%': { boxShadow: '0 0 30px rgba(232,138,74,0.2)' },
                            '50%': { boxShadow: '0 0 50px rgba(232,138,74,0.4)' },
                            '100%': { boxShadow: '0 0 30px rgba(232,138,74,0.2)' },
                        },
                        fade-in: {
                            '0%': { opacity: 0, transform: 'translateY(20px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' },
                        }
                    },
                    animation: {
                        'sunset-ripple': 'sunset-ripple 8s ease-in-out infinite',
                        'cloud-float': 'cloud-float 15s ease-in-out infinite',
                        'tower-shadow': 'tower-shadow 6s ease-in-out infinite',
                        'fade-in': 'fade-in 1s ease-out forwards',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            /* å›½é£åŸºç¡€æ ·å¼ */
            .ink-border {
                border: 1px solid #1a1a18;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            }
            .chinese-border {
                border: 1px solid #8c6a48;
                border-radius: 4px;
                position: relative;
            }
            .chinese-border::before {
                content: '';
                position: absolute;
                top: 8px;
                left: 8px;
                right: 8px;
                bottom: 8px;
                border: 1px dashed #e88a4a;
                border-radius: 2px;
                pointer-events: none;
            }
            
            /* é¦–é¡µè‰ºæœ¯åŒ–æ ¸å¿ƒæ ·å¼ - ç§»åŠ¨ç«¯é€‚é… */
            .home-container {
                background: linear-gradient(to bottom, rgba(248,244,232,0.1), rgba(248,244,232,0.8)), 
                            url('https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/cdce38fa24d04598a15a171be4643f91.jpg~tplv-a9rns2rl98-image.png?rcl=202512230918108C15464316B5CE0069CB&rk3s=8e244e95&rrcfp=dafada99&x-expires=2082676690&x-signature=tvn%2BUUiYEjHLw%2FR8xnjUxN5r1qM%3D');
                background-size: cover;
                background-position: center;
                background-attachment: fixed;
            }
            .sunset-light {
                position: absolute;
                top: 25%;
                right: 20%;
                width: 280px;
                height: 280px;
                border-radius: 50%;
                background: radial-gradient(circle, rgba(232,138,74,0.4) 0%, rgba(232,138,74,0) 70%);
                transform: translate(-50%, -50%);
                animation: sunset-ripple 8s ease-in-out infinite;
                z-index: 1;
                filter: blur(15px);
            }
            .menu-card {
                background: rgba(248,244,232,0.85);
                backdrop-filter: blur(8px);
                transition: all 0.4s ease;
                border: 1px solid rgba(140,106,72,0.3);
                border-radius: 12px;
                overflow: hidden;
                position: relative;
            }
            .menu-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                transition: left 0.8s ease;
            }
            .menu-card:hover {
                transform: translateY(-8px) scale(1.02);
                box-shadow: 0 12px 24px rgba(140,106,72,0.2);
            }
            .menu-card:hover::before {
                left: 100%;
            }
            
            /* å¤•ç…§äº’åŠ¨æ¨¡å—æ ·å¼ - ç§»åŠ¨ç«¯é€‚é… */
            .sunset-container {
                position: relative;
                width: 100%;
                height: 100vh;
                overflow: hidden;
            }
            .sunset-bg {
                position: absolute;
                inset: 0;
                background: url('https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/951f7f841b5f43e882cf25ad1508450e.jpg~tplv-a9rns2rl98-image.png?rcl=202512230918108C15464316B5CE0069CB&rk3s=8e244e95&rrcfp=dafada99&x-expires=2082676690&x-signature=vsjd1ukmKgctE8eQYpf1cdotIX8%3D');
                background-size: cover;
                background-position: center;
                transition: all 2s ease;
            }
            .sunset-overlay {
                position: absolute;
                inset: 0;
                transition: all 2s ease;
                z-index: 2;
            }
            .control-panel {
                position: absolute;
                top: auto;
                bottom: 30px;
                right: 50%;
                transform: translateX(50%);
                z-index: 10;
                display: flex;
                flex-direction: row;
                gap: 10px;
                flex-wrap: wrap;
                justify-content: center;
                width: 90%;
                max-width: 400px;
            }
            .time-btn {
                background: rgba(248,244,232,0.9);
                border: 1px solid #8c6a48;
                border-radius: 10px;
                padding: 10px 12px;
                cursor: pointer;
                transition: all 0.3s ease;
                font-family: 'KaiTi', 'STKaiti', serif;
                font-size: 14px;
                color: #1a1a18;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                text-align: center;
                flex: 1;
                min-width: 110px;
            }
            .time-btn:hover {
                transform: scale(1.05);
                background: rgba(248,244,232,1);
                box-shadow: 0 6px 12px rgba(140,106,72,0.2);
            }
            .time-btn.active {
                background: #e88a4a;
                color: white;
                border-color: #c86a32;
            }
            
            /* çŸ¥è¯†é—®ç­”æ¨¡å—æ ·å¼ - ç§»åŠ¨ç«¯é€‚é… */
            .quiz-container {
                background: linear-gradient(to bottom, rgba(248,244,232,0.2), rgba(248,244,232,0.9)), 
                            url('https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/7938a7d4cbcf43c2ab2595273cdc2935.jpg~tplv-a9rns2rl98-image.png?rcl=202512230918108C15464316B5CE0069CB&rk3s=8e244e95&rrcfp=dafada99&x-expires=2082676690&x-signature=JtO5%2Ba7DmVgK2mEMyHE9uU%2BA0Zk%3D');
                background-size: cover;
                background-position: center;
                background-attachment: fixed;
                padding: 20px 0;
            }
            .quiz-card {
                background: rgba(248,244,232,0.95);
                border-radius: 12px;
                box-shadow: 0 8px 24px rgba(0,0,0,0.15);
                border: 1px solid #8c6a48;
                position: relative;
                overflow: hidden;
                width: 90%;
                max-width: 400px;
                margin: 0 auto;
            }
            .quiz-option {
                transition: all 0.3s ease;
                border: 1px solid #d8c8b8;
                border-radius: 8px;
            }
            .quiz-option:hover {
                background: rgba(232,138,74,0.1);
                border-color: #e88a4a;
                transform: translateX(4px);
            }
            .quiz-option.correct {
                background: rgba(72,187,120,0.2);
                border-color: #48bb78;
            }
            .quiz-option.wrong {
                background: rgba(220,38,38,0.2);
                border-color: #dc2626;
            }
            
            /* é€šç”¨å›½é£è£…é¥° - ç§»åŠ¨ç«¯é€‚é… */
            .chinese-divider {
                height: 2px;
                background: linear-gradient(90deg, transparent, #8c6a48, transparent);
                width: 70%;
                margin: 0 auto;
                position: relative;
            }
            .chinese-divider::after {
                content: '';
            }
            .back-btn {
                background: rgba(248,244,232,0.9);
                border: 1px solid #8c6a48;
                border-radius: 8px;
                transition: all 0.3s ease;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                padding: 8px 12px;
                font-size: 14px;
            }
            .back-btn:hover {
                background: rgba(248,244,232,1);
                transform: scale(1.05);
                box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            }
            .progress-container {
                position: absolute;
                bottom: 100px;
                left: 50%;
                transform: translateX(-50%);
                width: 85%;
                max-width: 400px;
                z-index: 10;
            }
            .time-progress {
                height: 8px;
                background: rgba(248,244,232,0.3);
                border-radius: 4px;
                overflow: hidden;
                border: 1px solid #8c6a48;
            }
            .progress-bar {
                height: 100%;
                background: linear-gradient(90deg, #e88a4a, #c86a32);
                width: 0%;
                transition: width 2s ease;
                border-radius: 3px;
            }
            /* ä¸‹ä¸€é¢˜æŒ‰é’®æ ·å¼ä¼˜åŒ– - ç§»åŠ¨ç«¯é€‚é… */
            .next-btn {
                background: #f8f4e8;
                border: 1px solid #1a1a18;
                color: #1a1a18 !important;
                border-radius: 8px;
                padding: 10px 20px;
                font-family: 'KaiTi', 'STKaiti', serif;
                font-size: 15px;
                transition: all 0.3s ease;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                width: 80%;
                max-width: 200px;
            }
            .next-btn:hover {
                background: #f0e8d8;
                transform: translateY(-2px);
                box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            }
        }
    </style>
</head>
<body class="bg-paper font-kai text-ink min-h-screen overflow-x-hidden">
    <!-- é¦–é¡µ - ä»…ç§»é™¤æ ‡é¢˜ï¼Œä¿ç•™æ‰€æœ‰åŸæœ‰æ’ç‰ˆ -->
    <div id="startScreen" class="fixed inset-0 home-container flex flex-col items-center justify-start p-4 pt-10 pb-16 z-50">
        <!-- åŠ¨æ€å¤•ç…§å…‰å½± - ä¿ç•™åŸæœ‰æ ·å¼ -->
        <div class="sunset-light"></div>
        
        <!-- åŠŸèƒ½æŒ‰é’®åŒº - ä¿ç•™æ‰€æœ‰åŸæœ‰æ ·å¼å’Œæ’ç‰ˆ -->
        <div class="w-full max-w-md flex flex-col gap-8 relative z-10 mb-16 px-4">
            <!-- çŸ¥è¯†é—®ç­”å¡ç‰‡ -->
            <div id="quizBtn" class="menu-card py-10 px-6 cursor-pointer animate-fade-in" style="animation-delay: 0.5s">
                <div class="flex items-center justify-center gap-4">
                    <i class="fa fa-book text-[clamp(2rem,7vw,3rem)] text-tower"></i>
                    <div>
                        <h3 class="text-[clamp(1.2rem,5vw,1.5rem)] font-bold text-ink">é›·å³°å¡”çŸ¥è¯†é—®ç­”</h3>
                        <p class="text-sm text-gray-600 mt-1">è§£é”å¤å¡”åƒå¹´æ•…äº‹</p>
                    </div>
                </div>
            </div>
            
            <!-- å¤•ç…§ä½“éªŒå¡ç‰‡ -->
            <div id="sunsetBtn" class="menu-card py-10 px-6 cursor-pointer animate-fade-in" style="animation-delay: 0.8s">
                <div class="flex items-center justify-center gap-4">
                    <i class="fa fa-sun-o text-[clamp(2rem,7vw,3rem)] text-sunset"></i>
                    <div>
                        <h3 class="text-[clamp(1.2rem,5vw,1.5rem)] font-bold text-ink">å¤•ç…§æ—¶è¾°ä½“éªŒ</h3>
                        <p class="text-sm text-gray-600 mt-1">æ„Ÿå—ä»é»„æ˜åˆ°æš®è‰²çš„å…‰å½±å˜å¹»</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨ç®€ä»‹ - ä¿ç•™æ‰€æœ‰åŸæœ‰æ ·å¼ -->
        <div class="absolute bottom-6 w-full max-w-lg chinese-border p-4 bg-paper/70 rounded-lg relative z-10 animate-fade-in px-4" style="animation-delay: 1.1s">
            <h4 class="text-center font-bold text-sunset-deep mb-3 text-base">æ™¯ç‚¹ç®€ä»‹</h4>
            <p class="text-[clamp(0.8rem,3vw,0.9rem)] leading-relaxed font-song text-ink text-center">
                é›·å³°å¤•ç…§æ˜¯è¥¿æ¹–åæ™¯ä¹‹ä¸€ï¼Œä½äºè¥¿æ¹–å—å²¸å¤•ç…§å±±çš„é›·å³°ä¸Šã€‚æ¯å½“å¤•é˜³è¥¿ä¸‹ï¼Œ
                æ™šéœæ˜ ç…§é›·å³°å¡”ï¼Œå¡”å½±æ¨ªæ–œï¼Œé‡‘ç¢§è€€ç›®ï¼Œå½¢æˆâ€œé›·å³°å¤•ç…§â€çš„ç»ç¾æ™¯è§‚ã€‚
            </p>
        </div>
    </div>

    <!-- æ¸¸æˆä¸»å®¹å™¨ - å®Œå…¨ä¿ç•™åŸæœ‰ä»£ç  -->
    <div id="gameContainer" class="hidden w-full h-screen">
        <!-- è¿”å›æŒ‰é’® - ä¿ç•™åŸæœ‰æ ·å¼ -->
        <button id="backBtn" class="back-btn absolute top-4 left-4 px-4 py-2 z-20 text-ink hover:bg-gray-100/80 text-sm">
            <i class="fa fa-arrow-left mr-1"></i> è¿”å›é¦–é¡µ
        </button>

        <!-- 1. çŸ¥è¯†é—®ç­”æ¨¡å— - å®Œå…¨ä¿ç•™ -->
        <div id="quizModule" class="hidden quiz-container w-full h-full flex items-center justify-center p-4">
            <div class="quiz-card p-6 w-full max-w-md relative">
                <h2 class="text-[clamp(1.2rem,4vw,1.8rem)] text-center text-tower mb-6 font-bold">
                    ã€Œé›·å³°çŸ¥å¤šå°‘ã€
                </h2>
                <div class="chinese-divider mb-8"></div>
                
                <div id="quizQuestion" class="mb-8 text-[clamp(0.9rem,3vw,1.1rem)] leading-relaxed font-song text-ink text-center">
                    1. é›·å³°å¤•ç…§æ˜¯â€œè¥¿æ¹–åæ™¯â€ä¸­çš„ç¬¬å‡ ä¸ªæ™¯ï¼Ÿ
                </div>
                
                <div id="quizOptions" class="space-y-4 mb-8">
                    <!-- é€‰é¡¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div id="quizResult" class="mt-4 text-center text-base hidden"></div>
                
                <div id="quizNext" class="mt-8 text-center hidden">
                    <!-- ç§»åŠ¨ç«¯ä¸‹ä¸€é¢˜æŒ‰é’® -->
                    <button onclick="nextQuestion()" class="next-btn">
                        ä¸‹ä¸€é¢˜ <i class="fa fa-arrow-right ml-1"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 2. å¤•ç…§æ—¶è¾°ä½“éªŒæ¨¡å— - å®Œå…¨ä¿ç•™ -->
        <div id="sunsetModule" class="hidden sunset-container">
            <!-- èƒŒæ™¯å±‚ -->
            <div id="sunsetBg" class="sunset-bg"></div>
            
            <!-- å…‰å½±å åŠ å±‚ -->
            <div id="sunsetOverlay" class="sunset-overlay"></div>
            
            <!-- æ§åˆ¶æŒ‰é’®é¢æ¿ - ä¿ç•™åŸæœ‰å¸ƒå±€ -->
            <div class="control-panel">
                <button class="time-btn active" onclick="setSunsetTime('early')">
                    <i class="fa fa-sun-o mr-1"></i> é»„æ˜
                </button>
                <button class="time-btn" onclick="setSunsetTime('golden')">
                    <i class="fa fa-star mr-1"></i> é»„é‡‘æ—¶åˆ»
                </button>
                <button class="time-btn" onclick="setSunsetTime('dusk')">
                    <i class="fa fa-moon-o mr-1"></i> æš®è‰²
                </button>
            </div>
            
            <!-- è¿›åº¦æ¡ - ä¿ç•™åŸæœ‰æ ·å¼ -->
            <div class="progress-container">
                <div class="time-progress">
                    <div id="timeProgressBar" class="progress-bar"></div>
                </div>
                <div class="flex justify-between text-xs text-white/90 mt-2">
                    <span>17:00</span>
                    <span>17:30</span>
                    <span>18:00</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é›·å³°å¡”é—®ç­”é¢˜åº“ - å®Œå…¨ä¿ç•™
        const quizBank = [
            {
                question: "1. é›·å³°å¤•ç…§æ˜¯â€œè¥¿æ¹–åæ™¯â€ä¸­çš„ç¬¬å‡ ä¸ªæ™¯ï¼Ÿ",
                options: ["â‘  ç¬¬ä¸ƒä¸ª", "â‘¡ ç¬¬å…«ä¸ª", "â‘¢ ç¬¬ä¹ä¸ª"],
                correct: 1,
                tip: "é›·å³°å¤•ç…§æ˜¯è¥¿æ¹–åæ™¯ä¹‹å…«å“¦~"
            },
            {
                question: "2. ç°é›·å³°å¡”é‡å»ºå®Œæˆçš„å¹´ä»½æ˜¯ï¼Ÿ",
                options: ["â‘  1999å¹´", "â‘¡ 2002å¹´", "â‘¢ 2005å¹´"],
                correct: 1,
                tip: "ç°é›·å³°å¡”äº2002å¹´10æœˆ25æ—¥é‡å»ºå¼€æ”¾~"
            },
            {
                question: "3. é›·å³°å¡”ä½äºè¥¿æ¹–çš„å“ªä¸ªæ–¹ä½ï¼Ÿ",
                options: ["â‘  è¥¿æ¹–å—å²¸", "â‘¡ è¥¿æ¹–åŒ—å²¸", "â‘¢ è¥¿æ¹–ä¸œå²¸"],
                correct: 0,
                tip: "é›·å³°å¡”åè½åœ¨è¥¿æ¹–å—å²¸çš„å¤•ç…§å±±é›·å³°ä¸Š~"
            },
            {
                question: "4. é›·å³°å¡”æœ€åˆä¿®å»ºäºå“ªä¸ªæœä»£ï¼Ÿ",
                options: ["â‘  å”ä»£", "â‘¡ å®‹ä»£", "â‘¢ æ˜ä»£"],
                correct: 1,
                tip: "é›·å³°å¡”å§‹å»ºäºåŒ—å®‹å¤ªå¹³å…´å›½äºŒå¹´ï¼ˆ977å¹´ï¼‰~"
            },
            {
                question: "5. ç°é›·å³°å¡”å…±æœ‰å‡ å±‚ï¼Ÿ",
                options: ["â‘  3å±‚", "â‘¡ 5å±‚", "â‘¢ 7å±‚"],
                correct: 1,
                tip: "ç°é›·å³°å¡”ä¸ºäº”å±‚å…«é¢çš„æ¥¼é˜å¼å¡”~"
            }
        ];
        
        // å…¨å±€å˜é‡ - å®Œå…¨ä¿ç•™
        let currentQuizIndex = 0;
        let sunsetType = 'early';

        // ========== çŸ¥è¯†é—®ç­”é€»è¾‘ ==========
        function initQuiz() {
            currentQuizIndex = 0;
            renderQuiz();
        }

        function renderQuiz() {
            const quiz = quizBank[currentQuizIndex];
            document.getElementById('quizQuestion').textContent = quiz.question;
            
            const optionsEl = document.getElementById('quizOptions');
            optionsEl.innerHTML = '';
            
            quiz.options.forEach((option, idx) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option p-4 cursor-pointer text-center text-sm';
                optionDiv.textContent = option;
                optionDiv.onclick = () => checkAnswer(idx);
                optionsEl.appendChild(optionDiv);
            });
            
            document.getElementById('quizResult').classList.add('hidden');
            document.getElementById('quizNext').classList.add('hidden');
        }

        function checkAnswer(choice) {
            const quiz = quizBank[currentQuizIndex];
            const resultEl = document.getElementById('quizResult');
            const options = document.querySelectorAll('.quiz-option');
            
            // æ ‡è®°ç­”æ¡ˆçŠ¶æ€
            options.forEach((el, idx) => {
                el.style.pointerEvents = 'none';
                if (idx === quiz.correct) {
                    el.classList.add('correct');
                } else if (idx === choice && idx !== quiz.correct) {
                    el.classList.add('wrong');
                }
            });
            
            // æ˜¾ç¤ºç»“æœ
            if (choice !== quiz.correct) {
                resultEl.textContent = `âŒ å›ç­”é”™è¯¯~ ${quiz.tip}`;
                resultEl.className = "mt-4 text-center text-base text-red-600";
            } else {
                resultEl.textContent = `âœ… å›ç­”æ­£ç¡®ï¼${quiz.tip}`;
                resultEl.className = "mt-4 text-center text-base text-green-600";
            }
            
            resultEl.classList.remove('hidden');
            
            // æ˜¾ç¤ºä¸‹ä¸€é¢˜æŒ‰é’®ï¼ˆæœ€åä¸€é¢˜é™¤å¤–ï¼‰
            if (currentQuizIndex < quizBank.length - 1) {
                setTimeout(() => {
                    document.getElementById('quizNext').classList.remove('hidden');
                }, 800);
            } else {
                resultEl.textContent = "ğŸ‰ æ‰€æœ‰é—®é¢˜å›ç­”æ­£ç¡®ï¼ä½ å·²è§£é”é›·å³°å¡”å…¨éƒ¨å°çŸ¥è¯†~";
            }
        }

        function nextQuestion() {
            currentQuizIndex++;
            renderQuiz();
        }

        // ========== å¤•ç…§æ—¶è¾°ä½“éªŒé€»è¾‘ ==========
        function initSunset() {
            setSunsetTime('early');
        }

        function setSunsetTime(type) {
            sunsetType = type;
            const bgEl = document.getElementById('sunsetBg');
            const overlayEl = document.getElementById('sunsetOverlay');
            const progressBar = document.getElementById('timeProgressBar');
            const timeBtns = document.querySelectorAll('.time-btn');
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            timeBtns.forEach(btn => btn.classList.remove('active'));
            // ä¿®å¤event.targetå¯èƒ½ä¸ºç©ºçš„é—®é¢˜
            if (event && event.target) {
                event.target.classList.add('active');
            } else {
                timeBtns.forEach((btn, idx) => {
                    if ((type === 'early' && idx === 0) || (type === 'golden' && idx === 1) || (type === 'dusk' && idx === 2)) {
                        btn.classList.add('active');
                    }
                });
            }
            
            // ä¸åŒæ—¶è¾°çš„å…‰å½±æ•ˆæœ
            switch(type) {
                case 'early': // é»„æ˜ - æ˜äº®é€šé€
                    bgEl.style.filter = 'brightness(1) contrast(1) saturate(1.1)';
                    overlayEl.style.background = 'linear-gradient(to bottom, rgba(232,138,74,0.05), rgba(0,0,0,0.1))';
                    progressBar.style.width = '0%';
                    break;
                    
                case 'golden': // é»„é‡‘æ—¶åˆ» - æš–è‰²è°ƒå¢å¼º
                    bgEl.style.filter = 'brightness(1.1) contrast(1.05) saturate(1.3) sepia(0.1)';
                    overlayEl.style.background = 'linear-gradient(to bottom, rgba(232,138,74,0.15), rgba(0,0,0,0.2))';
                    progressBar.style.width = '50%';
                    break;
                    
                case 'dusk': // æš®è‰² - æš—è°ƒ+è“ç´«è‰²è°ƒ
                    bgEl.style.filter = 'brightness(0.85) contrast(1.1) saturate(1.2) sepia(0.2) hue-rotate(-10deg)';
                    overlayEl.style.background = 'linear-gradient(to bottom, rgba(140,106,72,0.2), rgba(0,0,0,0.4))';
                    progressBar.style.width = '100%';
                    break;
            }
        }

        // ========== ç•Œé¢åˆ‡æ¢é€»è¾‘ ==========
        function backToMenu() {
            document.getElementById('gameContainer').classList.add('hidden');
            document.getElementById('quizModule').classList.add('hidden');
            document.getElementById('sunsetModule').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            const timeBtns = document.querySelectorAll('.time-btn');
            timeBtns.forEach((btn, idx) => {
                btn.classList.remove('active');
                if (idx === 0) btn.classList.add('active');
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆç»‘å®šäº‹ä»¶ - å®Œå…¨ä¿ç•™
        window.onload = function() {
            // æ‰“å¼€çŸ¥è¯†é—®ç­”
            document.getElementById('quizBtn').addEventListener('click', () => {
                document.getElementById('startScreen').classList.add('hidden');
                document.getElementById('gameContainer').classList.remove('hidden');
                document.getElementById('quizModule').classList.remove('hidden');
                initQuiz();
            });

            // æ‰“å¼€å¤•ç…§æ—¶è¾°ä½“éªŒ
            document.getElementById('sunsetBtn').addEventListener('click', () => {
                document.getElementById('startScreen').classList.add('hidden');
                document.getElementById('gameContainer').classList.remove('hidden');
                document.getElementById('sunsetModule').classList.remove('hidden');
                initSunset();
            });

            // ç»‘å®šè¿”å›æŒ‰é’®
            document.getElementById('backBtn').addEventListener('click', backToMenu);
        }
    </script>
</body>
</html>